# 实验手册

## 几个实验说明
- 轨迹绘制
    - 轨迹文件格式：每一行信息：时间，位移x,y,z,旋转四元数qx, qy, qz, qw
    - 项目路径： ./examples
- 几何视图可视化，基于pangolin可视化库，可视化四元数
    - 项目路径： ./visualizeGeometry
- 使用几何关系相关的属性，基于eigen库实现
    - 项目路径: ./useGemotry
    - Eigen库几个关键的类
        - Isometry3d，三维欧式变换矩阵，4*4矩阵
        - AngleAxisd，旋转向量
        - Quaterniond，四元数

## 编译运行
- 编译方法

```
mkdir build & cd build
cmake ..
make
```

- 运行

```
#轨迹可视化
cd build/examples
./plotTrajectory

#刚体运动几何可视化
cd build/visualizeGeometry
./visualizeGeometry
```

## 关键代码逻辑说明：

```
    ///.\examples\plotTrajectory.cpp 绘制轨迹和位姿的实现中，坐标轴方向的绘制
    //Eigen 的设计非常智能。当你用 Isometry3d 乘以 Vector3d 时，Eigen 默认它是一个方向向量，因此只应用旋转部分 R，而忽略平移部分 t。
    Vector3d Ow = poses[i].translation();
    Vector3d Xw = poses[i] * (0.1 * Vector3d(1, 0, 0));
    Vector3d Yw = poses[i] * (0.1 * Vector3d(0, 1, 0));
    Vector3d Zw = poses[i] * (0.1 * Vector3d(0, 0, 1));
    glBegin(GL_LINES);
    glColor3f(1.0, 0.0, 0.0);
    glVertex3d(Ow[0], Ow[1], Ow[2]);
    glVertex3d(Xw[0], Xw[1], Xw[2]);
    glColor3f(0.0, 1.0, 0.0);
    glVertex3d(Ow[0], Ow[1], Ow[2]);
    glVertex3d(Yw[0], Yw[1], Yw[2]);
    glColor3f(0.0, 0.0, 1.0);
    glVertex3d(Ow[0], Ow[1], Ow[2]);
    glVertex3d(Zw[0], Zw[1], Zw[2]);
```

可视化效果图如下

![轨迹可视化](./trajectory_vis.png)

位姿可视化效果图如下：
![位姿可视化效果图](image.png)
