# Traps and System Calls

- 用户态三种traps，保存用户态cpu现场，进入内核态在内核栈执行
- 内核态两种traps，设备和异常，比如时钟中断，触发进程调度，保存内核运行状态现场到内核栈(不在寄存器里保存)，调用kerneltrap后将栈内的内容回到寄存器
- 用户程序端，通过stubs接口，将系统调用的函数信息存入a7寄存器，调用ecall触发traps，从而进一步在内核态运行具体的系统调用函数的逻辑
